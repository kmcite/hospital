---
# ğŸ¥ Treatment Loop

The **`startTreatmentLoop`** function is the core of the hospital workflow. It continuously monitors for available staff and patients, and manages the **treatment process** from reception â†’ nurse â†’ doctor.
---

## âš™ï¸ How It Works

1. **Looping**

   - Runs in an infinite loop with a 1-second delay between checks.

2. **Staff Availability Checks**

   - ğŸ§‘â€ğŸ’¼ Receptionist: If none available â†’ âŒ skip iteration.
   - ğŸ‘©â€âš•ï¸ Nurse: If none available â†’ âŒ skip iteration.
   - ğŸ©º Doctor: If none available â†’ âŒ skip iteration.

3. **Workload Check**

   - If the nurse is already working (`isWorking()`), the loop continues without assigning new patients.

4. **Reception Queue Check**

   - If no receptions are available, logs `NoReceptionsAvailable`.

5. **Assigning Reception to Nurse**

   - Takes the **last reception** from the list.
   - Assigns the **current nurse** to handle the patient.

6. **Consultation Time Calculation**

   - Iterates over consultation options and sums up their **duration**.

7. **Start Work**

   - The nurse starts working for the calculated total consultation time.

---

## ğŸ“ Example Flow

- âœ… Receptionist, Nurse, Doctor all on duty.
- ğŸ“‹ Reception queue has patients.
- ğŸ§‘â€âš•ï¸ Nurse is free â†’ takes the patient.
- â± Calculates total consultation duration.
- ğŸ‘©â€âš•ï¸ Nurse works for that time â†’ loop waits.

---

## ğŸ”‘ Key Points

- Ensures **sequential treatment flow**.
- Patients are only seen when **all staff roles are filled**.
- Nurses cannot be overloaded â€” they finish current tasks first.
- Logs system state (`NoReceptionistOnDuty`, `NoNurseOnDuty`, `NoDoctorOnDuty`, `NoReceptionsAvailable`).

---

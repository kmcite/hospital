---
# ğŸ¥ Chit Issuing System

## ğŸ” Overview

The **Chit Issuing Loop** (`startIssuingChits`) manages how patients at the **reception desk** are registered and billed.
It simulates a **real hospital front desk workflow** where patients get a chit ğŸ“ before moving to treatment.
---

## âš™ï¸ Core Logic

- Runs **every second** (`Future.delayed(Duration(seconds: 1))`).
- Checks if a **receptionist is on duty**:

  - âŒ If **none** â†’ wait & retry.
  - âœ… If available â†’ process all waiting patients.

---

## ğŸ‘¥ Reception Flow

1. Loops through patients in `receptionistQueue`.
2. Creates a `Reception` object for each patient:

   - `patient` â†’ the incoming patient ğŸ‘©â€âš•ï¸ğŸ‘¨â€âš•ï¸
   - `receptionist` â†’ the active receptionist ğŸ§¾

3. Stores the reception in the global `receptions` map.
4. Issues a **chit fee receipt** ğŸ’° via `balanceRepository.useBalance()`.
5. Waits **600 ms** â±ï¸ before moving to the next patient (simulating service time).
6. Clears the queue once all patients are processed.

---

## ğŸ“¦ Important Variables

- `receptionistQueue` â†’ Patients waiting at reception ğŸª‘.
- `currentReceptionist()` â†’ Returns the receptionist currently on duty.
- `Reception` â†’ Links a patient with a receptionist + generates MR (medical record) ID.
- `Receipt` â†’ Stores chit fee details for bookkeeping ğŸ’³.
- `balanceRepository` â†’ Tracks money inflow/outflow.

---

## ğŸ¯ Simulation Purpose

This system models:

- ğŸ§¾ **Front desk operations** (chit generation).
- ğŸ’¸ **Hospital income tracking** from chit fees.
- â±ï¸ **Service timing** between patient registrations.

---
